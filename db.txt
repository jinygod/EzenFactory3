-- 회원 테이블
CREATE TABLE user_table (
    user_idx number constraint USER_PK primary key,
    user_name varchar2(20) not null,
    user_pw varchar2(20) not null,
    user_email varchar2(20) not null,
    user_tel varchar2(20)  not null
    );

-- 품목 테이블
CREATE TABLE product_table (
    product_idx number constraint product_PK primary key,
    product_div varchar2(20) not null,
    product_modelno varchar2(20) not null,
    product_name varchar2(50) not null,
    product_size varchar2(20) not null,
    product_unit varchar2(20) not null,
    product_info varchar2(2000) not null
    );
    
-- 공정 테이블
CREATE TABLE process_table (
    process_idx number constraint process_PK primary key,
    process_seq number not null,
    process_name varchar2(20) not null,
    process_info varchar2(2000) not null,
    process_time varchar2(20) not null,
    process_timeunit varchar2(20) not null
    );

-- 품목별공정정보테이블
CREATE TABLE pop_table (
    product_idx number not null,
    process_idx number not null,
    pop_info varchar2(2000) not null,
    pop_version varchar2(20) not null,
    pop_processtime varchar2(20) not null,
    pop_AvgLossRate number not null,
    pop_AvgLossCnt number not null,
    pop_AvgDefRate number not null,
    pop_AvgDefCnt number not null,
    constraint pop_product_fk foreign key (product_idx) references product_table (product_idx),
    constraint pop_process_fk foreign key (process_idx) references process_table (process_idx)
    );

-- 거래처테이블
CREATE TABLE client_table(
    client_idx number constraint client_PK primary key,
    client_name varchar2(20) not null,
    client_tel varchar2(20) not null,
    client_ceo varchar2(20) not null,
    client_zipcode varchar2(20) not null,
    client_addr varchar2(200) not null
    );
    
-- 주문테이블
CREATE TABLE order_table(
    order_idx number constraint order_pk primary key,
    order_status varchar2(20) not null,
    order_shipment varchar2(20) not null,
    client_idx number not null,
    product_idx number not null,
    product_modelno varchar2(20) not null,
    order_regdate varchar2(20) not null,
    order_deadline varchar2(20) not null,
    order_exdate varchar2(20) not null,
    order_cnt number not null,
    order_unit varchar2(20) not null,
    order_unit_price number not null,
    order_amt number not null,
    order_manager varchar2(20) not null,
    order_date varchar2(20) not null,
     constraint order_client_fk foreign key (client_idx) references client_table (client_idx),
      constraint order_product_fk foreign key (product_idx) references product_table (product_idx)
    );
    
-- 생산실적테이블
CREATE TABLE perform_table(
    order_idx number not null,
    perform_status varchar2(20) not null,
    product_idx number not null,
    product_modelno varchar2(20) not null,
    order_cnt number not null,
    perform_cnt number not null,
    perform_good_cnt number not null,
    perform_bad_cnt number not null,
    perform_unit varchar2(20) not null,
    perform_date varchar2(20) not null,
    constraint perform_order_fk foreign key (order_idx) references order_table (order_idx),
    constraint perform_product_fk foreign key (product_idx) references product_table (product_idx)
    
    );

CREATE TABLE menu_table(
    menu_idx number constraint menu_pk primary key,
    menu_title varchar2(30) not null,
    menu_content varchar2(200) not null
    );


INSERT INTO menu_table values (1, '품목관리', '제품 조회부터 수정 및 관리가 가능한 메뉴입니다');
INSERT INTO menu_table values (2, '주문관리', '주문 조회부터 수정 및 관리가 가능한 메뉴입니다');
INSERT INTO menu_table values (3, '생산관리', '생산 조회부터 수정 및 관리가 가능한 메뉴입니다');
INSERT INTO menu_table values (4, '공정관리', '공정현황을 확인할 수 있는 메뉴입니다');
INSERT INTO menu_table values (5, '실적관리', '생산실적을 다양한 보고서 형식으로 볼 수 있습니다');
INSERT INTO menu_table values (6, '기초정보관리', '기초 데이터를 입력하는 메뉴입니다');