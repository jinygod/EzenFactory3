-- 회원 테이블
CREATE TABLE user_table (
    user_idx number constraint USER_PK primary key,
    user_name varchar2(20) not null,
    user_pw varchar2(20) not null,
    user_email varchar2(20) not null,
    user_tel varchar2(20)  not null
    );

-- 품목 테이블
CREATE TABLE product_table (
    product_idx number constraint product_PK primary key,
    product_div varchar2(20) not null,
    product_modelno varchar2(20) not null,
    product_name varchar2(50) not null,
    product_size varchar2(20) not null,
    product_unit varchar2(20) not null,
    product_info varchar2(2000) not null
    );
    
-- 공정 테이블
CREATE TABLE process_table (
    process_idx number constraint process_PK primary key,
    process_seq number not null,
    process_name varchar2(20) not null,
    process_info varchar2(2000) not null,
    process_time varchar2(20) not null,
    process_timeunit varchar2(20) not null
    );

-- 품목별공정정보테이블
CREATE TABLE pop_table (
    product_idx number not null,
    process_idx number not null,
    pop_info varchar2(2000) not null,
    pop_version varchar2(20) not null,
    pop_processtime varchar2(20) not null,
    pop_AvgLossRate number not null,
    pop_AvgLossCnt number not null,
    pop_AvgDefRate number not null,
    pop_AvgDefCnt number not null,
    constraint pop_product_fk foreign key (product_idx) references product_table (product_idx),
    constraint pop_process_fk foreign key (process_idx) references process_table (process_idx)
    );

-- 거래처테이블
CREATE TABLE client_table(
    client_idx number constraint client_PK primary key,
    client_name varchar2(20) not null,
    client_tel varchar2(20) not null,
    client_ceo varchar2(20) not null,
    client_zipcode varchar2(20) not null,
    client_addr varchar2(200) not null
    );
    
-- 주문테이블
CREATE TABLE order_table(
    order_idx number constraint order_pk primary key,
    order_status varchar2(20) not null,
    order_shipment varchar2(20) not null,
    client_idx number not null,
    product_idx number not null,
    product_modelno varchar2(20) not null,
    order_regdate varchar2(20) not null,
    order_deadline varchar2(20) not null,
    order_exdate varchar2(20) not null,
    order_cnt number not null,
    order_unit varchar2(20) not null,
    order_unit_price number not null,
    order_amt number not null,
    order_manager varchar2(20) not null,
    order_date varchar2(20) not null,
     constraint order_client_fk foreign key (client_idx) references client_table (client_idx),
      constraint order_product_fk foreign key (product_idx) references product_table (product_idx)
    );
    
-- 생산실적테이블
CREATE TABLE perform_table(
    order_idx number not null,
    perform_status varchar2(20) not null,
    product_idx number not null,
    product_modelno varchar2(20) not null,
    order_cnt number not null,
    perform_cnt number not null,
    perform_good_cnt number not null,
    perform_bad_cnt number not null,
    perform_unit varchar2(20) not null,
    perform_date varchar2(20) not null,
    constraint perform_order_fk foreign key (order_idx) references order_table (order_idx),
    constraint perform_product_fk foreign key (product_idx) references product_table (product_idx)
    
    );

CREATE TABLE menu_table(
    menu_idx number constraint menu_pk primary key,
    menu_title varchar2(30) not null,
    menu_content varchar2(200) not null
    );


INSERT INTO menu_table values (1, '품목관리', '제품 조회부터 수정 및 관리가 가능한 메뉴입니다');
INSERT INTO menu_table values (2, '주문관리', '주문 조회부터 수정 및 관리가 가능한 메뉴입니다');
INSERT INTO menu_table values (3, '생산관리', '생산 조회부터 수정 및 관리가 가능한 메뉴입니다');
INSERT INTO menu_table values (4, '공정관리', '공정현황을 확인할 수 있는 메뉴입니다');
INSERT INTO menu_table values (5, '실적관리', '생산실적을 다양한 보고서 형식으로 볼 수 있습니다');
INSERT INTO menu_table values (6, '기초정보관리', '기초 데이터를 입력하는 메뉴입니다');

create table submenu_table(
    menu_idx number not null,
    menu_title varchar2(20) not null,
    submenu_idx number constraint submenu_pk primary key,
    submenu_title varchar2(30) not null,
    submenu_eng varchar2(20) not null,
    constraint submenu_menu_fk foreign key (menu_idx) references menu_table (menu_idx));
    
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(1,'품목관리',1,'품목등록','product_reg');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(1,'품목관리',2,'품목조회','product_list');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(2,'주문관리',3,'거래처조회','client_list');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(2,'주문관리',4,'주문등록','order_reg');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(2,'주문관리',5,'주문승인','order_approve');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(2,'주문관리',6,'주문조회','order_list');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(3,'생산관리',7,'생산지시서','produce_orderwork');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(3,'생산관리',8,'생산현황조회','produce_status');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(4,'공정관리',9,'공정등록','process_reg');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(4,'공정관리',10,'공정조회','process_list');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(4,'공정관리',11,'품목별공정정보','process_info');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(5,'실적관리',12,'품목별생산실적조회','result_product_list');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(5,'실적관리',13,'공정별생산실적조회','result_process_list');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(5,'실적관리',14,'에러현황조회','result_error');
insert into submenu_table(menu_idx, menu_title, submenu_idx, submenu_title, submenu_eng) values(5,'실적관리',15,'실적보고서','result_report');

insert into pop_table values(1001,1001,'재단','version01','30',4,0,0,3);
insert into pop_table values(1001,2001,'재봉','version01','30',7,0,8,3);
insert into pop_table values(1001,3001,'포장','version01','30',6,0,2,2);
insert into pop_table values(1002,1001,'재단','version01','30',7,8,7,1);
insert into pop_table values(1002,2001,'재봉','version01','30',0,7,3,6);
insert into pop_table values(1002,3001,'포장','version01','30',9,0,3,2);
insert into pop_table values(1003,1001,'재단','version01','30',9,3,1,2);
insert into pop_table values(1003,2001,'재봉','version01','30',9,0,3,1);
insert into pop_table values(1003,3001,'포장','version01','30',0,5,9,3);
insert into pop_table values(1004,1001,'재단','version01','30',9,6,0,0);
insert into pop_table values(1004,2001,'재봉','version01','30',0,5,1,3);
insert into pop_table values(1004,3001,'포장','version01','30',2,7,4,3);
insert into pop_table values(1005,1001,'재단','version01','30',6,9,3,4);
insert into pop_table values(1005,2001,'재봉','version01','30',9,7,7,6);
insert into pop_table values(1005,3001,'포장','version01','30',4,9,3,0);
insert into pop_table values(1006,1001,'재단','version01','30',2,5,5,7);
insert into pop_table values(1006,2001,'재봉','version01','30',6,4,0,5);
insert into pop_table values(1006,3001,'포장','version01','30',5,3,1,9);
insert into pop_table values(2001,1001,'재단','version01','30',6,6,1,2);
insert into pop_table values(2001,2001,'재봉','version01','30',4,8,7,2);
insert into pop_table values(2001,3001,'포장','version01','30',7,5,4,8);
insert into pop_table values(2002,1001,'재단','version01','30',6,1,3,0);
insert into pop_table values(2002,2001,'재봉','version01','30',0,8,0,5);
insert into pop_table values(2002,3001,'포장','version01','30',3,8,1,3);
insert into pop_table values(2003,1001,'재단','version01','30',3,8,1,2);
insert into pop_table values(2003,2001,'재봉','version01','30',1,6,3,8);
insert into pop_table values(2003,3001,'포장','version01','30',2,5,9,7);
insert into pop_table values(2004,1001,'재단','version01','30',6,5,9,7);
insert into pop_table values(2004,2001,'재봉','version01','30',1,9,8,1);
insert into pop_table values(2004,3001,'포장','version01','30',2,0,4,6);
insert into pop_table values(2005,1001,'재단','version01','30',1,4,6,9);
insert into pop_table values(2005,2001,'재봉','version01','30',3,2,0,1);
insert into pop_table values(2005,3001,'포장','version01','30',5,3,2,7);
insert into pop_table values(2006,1001,'재단','version01','30',6,5,4,5);
insert into pop_table values(2006,2001,'재봉','version01','30',6,1,1,6);
insert into pop_table values(2006,3001,'포장','version01','30',9,2,6,3);
insert into pop_table values(1001,1001,'재단','version02','30',0,9,4,6);
insert into pop_table values(1001,2001,'재봉','version02','30',5,3,4,0);
insert into pop_table values(1001,3001,'포장','version02','30',6,3,1,3);
insert into pop_table values(1002,1001,'재단','version02','30',7,7,5,9);
insert into pop_table values(1002,2001,'재봉','version02','30',4,8,8,6);
insert into pop_table values(1002,3001,'포장','version02','30',9,0,7,6);
insert into pop_table values(1003,1001,'재단','version02','30',7,1,0,5);
insert into pop_table values(1003,2001,'재봉','version02','30',6,4,4,1);
insert into pop_table values(1003,3001,'포장','version02','30',4,9,0,0);
insert into pop_table values(1004,1001,'재단','version02','30',9,6,6,3);
insert into pop_table values(1004,2001,'재봉','version02','30',8,4,0,1);
insert into pop_table values(1004,3001,'포장','version02','30',4,6,8,7);
insert into pop_table values(1005,1001,'재단','version02','30',4,2,8,8);
insert into pop_table values(1005,2001,'재봉','version02','30',3,2,7,2);
insert into pop_table values(1005,3001,'포장','version02','30',9,5,4,1);
insert into pop_table values(1006,1001,'재단','version02','30',1,3,6,3);
insert into pop_table values(1006,2001,'재봉','version02','30',8,0,3,6);
insert into pop_table values(1006,3001,'포장','version02','30',4,6,1,3);
insert into pop_table values(2001,1001,'재단','version02','30',2,7,1,3);
insert into pop_table values(2001,2001,'재봉','version02','30',2,4,1,9);
insert into pop_table values(2001,3001,'포장','version02','30',3,2,9,9);
insert into pop_table values(2002,1001,'재단','version02','30',3,6,6,4);
insert into pop_table values(2002,2001,'재봉','version02','30',4,3,8,3);
insert into pop_table values(2002,3001,'포장','version02','30',2,5,2,6);
insert into pop_table values(2003,1001,'재단','version02','30',1,1,8,7);
insert into pop_table values(2003,2001,'재봉','version02','30',2,2,2,7);
insert into pop_table values(2003,3001,'포장','version02','30',8,7,6,9);
insert into pop_table values(2004,1001,'재단','version02','30',7,9,3,0);
insert into pop_table values(2004,2001,'재봉','version02','30',6,6,1,4);
insert into pop_table values(2004,3001,'포장','version02','30',9,8,7,6);
insert into pop_table values(2005,1001,'재단','version02','30',1,9,2,9);
insert into pop_table values(2005,2001,'재봉','version02','30',6,0,1,4);
insert into pop_table values(2005,3001,'포장','version02','30',3,9,6,3);
insert into pop_table values(2006,1001,'재단','version02','30',6,1,8,3);
insert into pop_table values(2006,2001,'재봉','version02','30',0,8,8,2);
insert into pop_table values(2006,3001,'포장','version02','30',9,8,4,1);

create table orderwork_table(
    orderwork_idx number constraint orderwork_pk primary key,
    process_name varchar2(20) not null,
    product_idx number not null,
	product_modelno number not null, 
	order_regdate varchar2(20) not null,
	order_deadline varchar2(20) not null,
	order_exdate varchar2(20) not null,
	order_cnt number not null,
	order_unit varchar2(20) not null,
	order_unit_price number not null,
	order_amt number not null,
    orderwork_date varchar2(20) not null,
    constraint orderwork_product_fk foreign key (product_idx) references  product_table (product_idx)
    );
    
alter table submenu_table add (submenu_eng varchar2(20));
alter table submenu_table add (menu_eng varchar2(20));
alter table menu_table add (menu_eng varchar2(20));
alter table product_table modify product_modelno number;

create sequence orderwork_seq
start with 1
increment by 1
minvalue 1;

alter table pop_table add product_name varchar2(20);

--update  pop_table set  product_name = 'slacks'
--where product_idx = 2004 or  product_idx = 2005 or  product_idx = 2006;

alter table user_table add user_id varchar2(20) not null;